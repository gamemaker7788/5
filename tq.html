<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>9åŸå¤©æ°” Â· æœªæ¥5å¤© Â· å«æ—¥å‡ºæ—¥è½</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
body{margin:0;padding:30px;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif;background:linear-gradient(135deg,#89f7fe 0%,#66a6ff 100%);color:#fff;text-align:center}
h1{margin-bottom:10px;font-size:2rem}
.ctrl{margin-bottom:20px}
select{padding:8px 12px;border-radius:6px;border:none;font-size:16px}
.weather-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:15px;max-width:900px;margin:0 auto}
.day-card{background:rgba(255,255,255,.2);border-radius:12px;padding:15px;box-shadow:0 4px 16px rgba(0,0,0,.2)}
.day-date{font-size:14px;opacity:.9}
.day-icon{font-size:32px;margin:8px 0}
.day-temp{font-size:18px;font-weight:600}
.day-desc{font-size:13px;opacity:.8}
.day-sun{font-size:12px;margin-top:6px}
footer{margin-top:30px;font-size:13px;opacity:.8}
</style>
</head>
<body>
<h1><i class="fas fa-sun"></i> å¤©æ°”</h1>
<div class="ctrl">
    <select id="citySelect" onchange="refreshWeather()">
        <option value="ç¬¬æ¯”åˆ©æ–¯">ç¬¬æ¯”åˆ©æ–¯</option>
        <option value="è¥¿æ ¼çº³å‰">è¥¿æ ¼çº³å‰</option>
        <option value="å¡å…¹åˆ«å…‹">å¡å…¹åˆ«å…‹</option>
        <option value="å§†å…¹èµ«å¡”">å§†å…¹èµ«å¡”</option>
        <option value="å·´ç»Ÿ">å·´ç»Ÿ</option>
        <option value="åº“å¡”ä¼Šè¥¿">åº“å¡”ä¼Šè¥¿</option>
        <option value="æˆˆé‡Œ">æˆˆé‡Œ</option>
        <option value="åŸƒé‡Œæ¸©">åŸƒé‡Œæ¸©</option>
        <option value="å¡å‡¡">å¡å‡¡</option>
    </select>
</div>
<div id="weatherGrid" class="weather-grid">åŠ è½½ä¸­...</div>
<footer>2025/10/10</footer>

<script>
/* ========== 9åŸåæ ‡ ========== */
const cityCoords = {
    'ç¬¬æ¯”åˆ©æ–¯': { lat: 41.7151, lon: 44.8271 },
    'è¥¿æ ¼çº³å‰': { lat: 41.6203, lon: 45.5701 },
    'å¡å…¹åˆ«å…‹': { lat: 42.4723, lon: 44.4221 },
    'å§†å…¹èµ«å¡”': { lat: 41.6570, lon: 44.4720 },
    'å·´ç»Ÿ':     { lat: 41.6437, lon: 41.6057 },
    'åº“å¡”ä¼Šè¥¿': { lat: 42.2527, lon: 42.7000 },
    'æˆˆé‡Œ':     { lat: 41.9840, lon: 44.1158 },
    'åŸƒé‡Œæ¸©':   { lat: 40.1792, lon: 44.4991 },
    'å¡å‡¡':     { lat: 40.5574, lon: 44.9526 }
};

/* ========== å›¾æ ‡ & æè¿° ========== */
const weatherIcon = {0:'â˜€ï¸',1:'ğŸŒ¤ï¸',2:'â›…',3:'â˜ï¸',45:'ğŸŒ«ï¸',48:'ğŸŒ«ï¸',51:'ğŸŒ¦ï¸',53:'ğŸŒ¦ï¸',55:'ğŸŒ§ï¸',61:'ğŸŒ§ï¸',63:'ğŸŒ§ï¸',65:'â›ˆï¸',71:'ğŸŒ¨ï¸',73:'ğŸŒ¨ï¸',75:'ğŸŒ¨ï¸',77:'ğŸŒ¨ï¸',80:'ğŸŒ§ï¸',81:'ğŸŒ§ï¸',82:'â›ˆï¸',85:'ğŸŒ¨ï¸',86:'ğŸŒ¨ï¸',95:'â›ˆï¸',96:'ğŸŒ©ï¸',99:'ğŸŒ©ï¸'};
const weatherDesc = {0:'æ™´',1:'å¤šäº‘',2:'å°‘äº‘',3:'é˜´å¤©',45:'é›¾',48:'é›¾',51:'å°é›¨',53:'ä¸­é›¨',55:'å¤§é›¨',61:'å°é›¨',63:'ä¸­é›¨',65:'å¤§é›¨',71:'å°é›ª',73:'ä¸­é›ª',75:'å¤§é›ª',77:'é›ª',80:'é˜µé›¨',81:'é˜µé›¨',82:'å¼ºé˜µé›¨',85:'é˜µé›ª',86:'é˜µé›ª',95:'é›·æš´',96:'å¼ºé›·æš´',99:'å¼ºé›·æš´'};

/* ========== åˆ·æ–°å¤©æ°” ========== */
async function refreshWeather() {
    const city = document.getElementById('citySelect').value;
    const coord = cityCoords[city];
    const today = new Date();
    const dates = Array.from({length:5},(_,i)=>{
        const d=new Date(today); d.setDate(today.getDate()+i); return d.toISOString().slice(0,10);
    });

    const grid = document.getElementById('weatherGrid');
    grid.innerHTML = '<i class="fas fa-spinner fa-spin"></i> åŠ è½½ä¸­...';

    try {
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${coord.lat}&longitude=${coord.lon}&start_date=${dates[0]}&end_date=${dates[4]}&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset&timezone=Asia/Shanghai`;
        const res = await fetch(url);
        if (!res.ok) throw new Error(res.status);
        const data = await res.json();

        const daily = data.daily;
        let html = '';
        for (let i = 0; i < 5; i++) {
            const date   = dates[i];
            const code   = daily.weather_code[i];
            const tmax   = daily.temperature_2m_max[i];
            const tmin   = daily.temperature_2m_min[i];
            const sunrise = daily.sunrise[i].slice(11,16);
            const sunset  = daily.sunset[i].slice(11,16);
            const icon   = weatherIcon[code] || 'ğŸŒ¡ï¸';
            const desc   = weatherDesc[code] || 'æœªçŸ¥';
            const week   = ['å‘¨æ—¥','å‘¨ä¸€','å‘¨äºŒ','å‘¨ä¸‰','å‘¨å››','å‘¨äº”','å‘¨å…­'][new Date(date).getDay()];
            html += `
                <div class="day-card">
                    <div class="day-date">${week}<br>${date.slice(5)}</div>
                    <div class="day-icon">${icon}</div>
                    <div class="day-temp">${tmin}Â° ~ ${tmax}Â°</div>
                    <div class="day-desc">${desc}</div>
                    <div class="day-sun"><i class="fas fa-sun"></i> ${sunrise}<br><i class="fas fa-moon"></i> ${sunset}</div>
                </div>`;
        }
        grid.innerHTML = html;
    } catch (e) {
        grid.innerHTML = 'âŒ åŠ è½½å¤±è´¥';
        console.error(e);
    }
}

/* ========== åˆå§‹åŠ è½½ ========== */
refreshWeather();
</script>
</body>
</html>
