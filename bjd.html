<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>格鲁吉亚跟团游行程报价单</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="bjd.css">
  <style>
    /* 极简对齐样式，仅保证演示可用，你原有 bjd.css 会覆盖 */
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 4px 6px; text-align: center; font-size: 12px; }
    th { background: #f5f5f5; }
    .price-input { width: 70px; }
    select.car-type-select { width: 90px; font-size: 12px; }
  </style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo"><i class="fas fa-globe-europe"></i></div>
    <h1>格鲁吉亚跟团游行程报价单</h1>
    <p class="subtitle">专业地接服务管理系统</p>
  </header>

  <div class="content">
    <!-- 行程基本信息 -->
    <div class="section">
      <h2 class="section-title">行程基本信息</h2>
      <div class="info-grid">
        <div class="info-card">
          <h3>出行信息</h3>
          <div class="info-item">
            <span class="info-label">单号：</span>
            <span class="info-value">
              <input type="text" class="order-number-input" id="order-number" placeholder="可不填">
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">服务类型：</span>
            <span class="info-value"><input type="text" class="editable" value="格鲁吉亚跟团游" id="service-type"></span>
          </div>
          <div class="info-item">
            <span class="info-label">出行日期：</span>
            <span class="info-value">
              <div class="date-picker">
                <input type="date" id="start-date" class="date-input">
                <span>至</span>
                <input type="date" id="end-date" class="date-input">
              </div>
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">抵达时间：</span>
            <span class="info-value"><input type="time" id="arrival-time" class="time-input" value="21:20"></span>
          </div>
          <div class="info-item">
            <span class="info-label">航班号：</span>
            <span class="info-value"><input type="text" class="editable" value="" id="flight-number" placeholder="如CZ6039"></span>
          </div>
        </div>

        <div class="info-card">
          <h3>服务详情</h3>
          <div class="info-item">
            <span class="info-label">车型：</span>
            <span class="info-value" id="car-type-display">7座车</span>
          </div>
          <div class="info-item">
            <span class="info-label">酒店标准：</span>
            <span class="info-value"><input type="text" class="editable" value="" id="hotel-standard"></span>
          </div>
          <div class="info-item">
            <span class="info-label">房型：</span>
            <span class="info-value"><input type="text" class="editable" value="" id="room-type"></span>
          </div>
          <div class="info-item">
            <span class="info-label">乘客人数：</span>
            <span class="info-value" id="passenger-count">1</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 行程安排 -->
    <div class="section">
      <h2 class="section-title">行程安排</h2>
      <div class="itinerary-actions">
        <div class="btn-box"><button class="btn" id="add-day-btn"><i class="fas fa-plus"></i> 添加一天</button></div>
      </div>

      <!-- 批量改车型 -->
      <div class="batch-car-bar">
        <button id="batch-car-5">全部5座</button>
        <button id="batch-car-7">全部7座</button>
        <button id="batch-car-m">全部多座</button>
        <p>注意⚠️:选择全部()座后,虽然包车栏没有勾选,但会强制勾选</p>
      </div>

      <table class="itinerary-table">
        <thead>
          <tr>
            <th width="5%">序号</th>
            <th width="12%">日期</th>
            <th width="25%">行程</th>
            <th width="10%">行程报价</th>
            <th width="20%">住宿</th>
            <th width="10%">住宿报价</th>
            <th width="5%">导游</th>
            <th width="12%">车型</th>
            <th width="10%">包车价</th>
            <th width="10%">换车价</th>
          </tr>
        </thead>
        <tbody id="itinerary-body"><!-- 动态生成 --></tbody>
      </table>
    </div>

    <!-- 服务选项 -->
    <div class="section">
      <h2 class="section-title">服务选项</h2>
      <div class="cost-breakdown">
        <h3>导游服务选择</h3>
        <div class="guide-options">
          <div class="guide-option selected" id="no-guide" data-type="no"><h4>无需导游</h4><p>价格: <span class="price-display">0</span> USD</p></div>
          <div class="guide-option" id="chinese-guide" data-type="chinese">
            <h4>中文导游</h4><p>价格: <input type="number" class="price-input" value="150" min="0" id="chinese-guide-price"> USD/天</p>
          </div>
          <div class="guide-option" id="english-guide" data-type="english">
            <h4>英文导游</h4><p>价格: <input type="number" class="price-input" value="100" min="0" id="english-guide-price"> USD/天</p>
          </div>
        </div>

        <h3>附加服务</h3>
        <div class="btn-box"><button class="btn" id="add-service-btn"><i class="fas fa-plus"></i> 添加附加服务</button></div>
        <div id="extra-services">
          <div class="extra-service-item" id="wine-tasting-service">
            <div class="extra-service-name">
              <input type="checkbox" id="wine-tasting" class="extra-service-checkbox">
              <label for="wine-tasting">酒庄品酒</label>
            </div>
            <div class="extra-service-price">
              <input type="number" class="price-input" value="40" min="0" id="wine-price"> USD
              <input type="text" class="unit-input" placeholder="/人" id="wine-unit">
              <button class="remove-btn" data-remove="wine-tasting"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="extra-service-item" id="tickets-service">
            <div class="extra-service-name">
              <input type="checkbox" id="tickets" class="extra-service-checkbox">
              <label for="tickets">景点门票</label>
            </div>
            <div class="extra-service-price">
              <input type="number" class="price-input" value="80" min="0" id="tickets-price"> USD
              <input type="text" class="unit-input" placeholder="/张" id="tickets-unit">
              <button class="remove-btn" data-remove="tickets"><i class="fas fa-times"></i></button>
            </div>
          </div>
        </div>
        
      </div>
    </div>

    <!-- 费用汇总 -->
    <div class="section">
      <h2 class="section-title">费用汇总</h2>
      <div class="price-section">
        <div class="price-item"><span>交通费用小计：</span><span class="price-display" id="travel-total">0</span> USD</div>
        <div class="price-item"><span>住宿费用小计：</span><span class="price-display" id="hotel-total">0</span> USD</div>
        <div class="price-item"><span>导游服务：</span><span class="price-display" id="guide-total">0</span> USD</div>
        <div class="price-item"><span>附加服务小计：</span><span class="price-display" id="extra-total">0</span> USD</div>
        <div class="total-price">总计: <span id="total-price">0</span> USD</div>
      </div>
    </div>

    <!-- 乘客信息 -->
    <div class="section">
      <h2 class="section-title">乘客信息</h2>
      <div class="info-card">
      <div class="btn-box"><button class="btn" id="add-passenger-btn"><i class="fas fa-plus"></i> 添加乘客</button></div>
        <div class="passenger-list" id="passenger-list"><!-- 动态生成 --></div>
        
      </div>
    </div>

    <!-- 导出格式 -->
    <div class="section">
      <h2 class="section-title">导出格式</h2>
      <div class="output-area" id="output-content"><!-- 输出内容 --></div>
      <div class="btn-box"><button class="btn" id="update-output-btn"><i class="fas fa-sync-alt"></i> 更新输出</button></div>
      <div class="btn-box"><button class="btn" id="copy-btn"><i class="fas fa-copy"></i> 复制文本</button></div>
      <div class="btn-box"><button class="btn" id="download-btn"><i class="fas fa-download"></i> 下载文件</button></div>
      <div class="btn-box"><button class="btn" id="save-supabase-btn"><i class="fas fa-save"></i> 保存到Supabase</button></div>
    </div>
  </div>

  <footer><p>格鲁吉亚专业地接服务 © 2023</p></footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="bjd.js"></script>
</body>
</html>
