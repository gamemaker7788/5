<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>格鲁吉亚跟团游行程报价单</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- 新 Dark 主题 CSS（已含圆角按钮+进度条+一键换色） -->
  <link rel="stylesheet" href="bjd.css" id="theme-link">
  <!-- 如想保留旧样式做回退，可把 bjd-dark.css 改名或放二级目录 -->
  <style>
    /* 仅微调表格边框颜色，与新主题保持一致 */
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid var(--border); padding: 4px 6px; text-align: center; font-size: 12px; }
    th { background: var(--surface-light); }
    .price-input { width: 70px; }
    select.car-type-select { width: 90px; font-size: 12px; }
  </style>
</head>
<body>
<div class="container">
  <header>
    <div class="logo"><i class="fas fa-globe-europe"></i></div>
    <h1>格鲁吉亚跟团游行程报价单</h1>
    <p class="subtitle">专业地接服务管理系统</p>

    <!-- ① Dark/Light 切换开关 -->
    <div class="theme-switch">
      <input type="checkbox" id="themeToggle">
      <label for="themeToggle" class="switch-label">
        <i class="fas fa-moon"></i>
        <i class="fas fa-sun"></i>
      </label>
    </div>
  </header>

  <div class="content">
    <div class="section">
      <h2 class="section-title">行程基本信息</h2>
      <div class="info-grid">
        <div class="info-card">
          <h3>出行信息</h3>
          <div class="info-item">
            <span class="info-label">单号：</span>
            <span class="info-value"><input type="text" class="order-number-input" id="order-number" placeholder="必填(仅数字)"></span>
          </div>
          <div class="info-item">
            <span class="info-label">服务类型：</span>
            <span class="info-value"><input type="text" class="editable" value="格鲁吉亚跟团游" id="service-type"></span>
          </div>
          <div class="info-item">
            <span class="info-label">出行日期：</span>
            <span class="info-value">
              <div class="date-picker">
                <input type="date" id="start-date" class="date-input">
                <span>至</span>
                <input type="date" id="end-date" class="date-input">
              </div>
            </span>
          </div>
          <div class="info-item">
            <span class="info-label">抵达时间：</span>
            <span class="info-value"><input type="time" id="arrival-time" class="time-input" value="21:20"></span>
          </div>
                    <div class="info-item">
            <span class="info-label">接机航班号：</span>
            <span class="info-value"><input type="text" class="editable" value="" id="flight-number-pickup" placeholder="如CZ6039"></span>
          </div>
          <div class="info-item">
            <span class="info-label">送机航班号：</span>
            <span class="info-value"><input type="text" class="editable" value="" id="flight-number-dropoff" placeholder="如CZ6040"></span>
          </div>

        </div>
        <div class="info-card">
          <h3>服务详情</h3>
          <div class="info-item"><span class="info-label">车型：</span><span class="info-value" id="car-type-display">7座车</span></div>
          <div class="info-item"><span class="info-label">酒店标准：</span><span class="info-value"><input type="text" class="editable" value="" id="hotel-standard"></span></div>
          <div class="info-item"><span class="info-label">房型：</span><span class="info-value"><input type="text" class="editable" value="" id="room-type"></span></div>
          <div class="info-item"><span class="info-label">乘客人数：</span><span class="info-value" id="passenger-count">1</span></div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">行程安排</h2>
      <div class="itinerary-actions">
        <div class="btn-box"><button class="btn" id="add-day-btn"><i class="fas fa-plus"></i> 添加一天</button></div>
      </div>
      <div class="btn-box">
        <button class="btn" id="batch-car-5">全部5座</button>
        <button class="btn" id="batch-car-7">全部7座</button>
        <button class="btn" id="batch-car-m">全部多座</button>
      </div>
      <table class="itinerary-table">
        <thead>
          <tr>
            <th width="5%">序号</th>
            <th width="12%">日期</th>
            <th width="25%">行程</th>
            <th width="10%">行程报价</th>
            <th width="20%">住宿</th>
            <th width="10%">住宿报价</th>
            <th width="5%">导游</th>
            <th width="12%">车型</th>
            <th width="10%">包车价</th>
            <th width="10%">换车价</th>
          </tr>
        </thead>
        <tbody id="itinerary-body"></tbody>
      </table>
    </div>

    <div class="section">
      <h2 class="section-title">服务选项</h2>
      <div class="cost-breakdown">
        <h3>导游服务选择</h3>
        <div class="guide-options">
          <div class="guide-option selected" id="no-guide" data-type="no"><h4>无需导游</h4><p>价格: <span class="price-display">0</span> USD</p></div>
          <div class="guide-option" id="chinese-guide" data-type="chinese"><h4>中文导游</h4><p>价格: <input type="number" class="price-input" value="150" min="0" id="chinese-guide-price"> USD/天</p></div>
          <div class="guide-option" id="english-guide" data-type="english"><h4>英文导游</h4><p>价格: <input type="number" class="price-input" value="100" min="0" id="english-guide-price"> USD/天</p></div>
        </div>
        <h3>附加服务</h3>
        <div class="btn-box"><button class="btn" id="add-service-btn"><i class="fas fa-plus"></i> 添加附加服务</button></div>
        <div id="extra-services">
          <div class="extra-service-item" id="wine-tasting-service">
            <div class="extra-service-name">
              <input type="checkbox" id="wine-tasting" class="extra-service-checkbox">
              <label for="wine-tasting">酒庄品酒</label>
            </div>
            <div class="extra-service-price">
              <input type="number" class="price-input" value="40" min="0" id="wine-price"> USD
              <input type="text" class="unit-input" placeholder="/人" id="wine-unit">
              <button class="remove-btn" data-remove="wine-tasting"><i class="fas fa-times"></i></button>
            </div>
          </div>
          <div class="extra-service-item" id="tickets-service">
            <div class="extra-service-name">
              <input type="checkbox" id="tickets" class="extra-service-checkbox">
              <label for="tickets">景点门票</label>
            </div>
            <div class="extra-service-price">
              <input type="number" class="price-input" value="80" min="0" id="tickets-price"> USD
              <input type="text" class="unit-input" placeholder="/张" id="tickets-unit">
              <button class="remove-btn" data-remove="tickets"><i class="fas fa-times"></i></button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">费用汇总</h2>
      <div class="price-section">
        <div class="price-item"><span>交通费用小计：</span><span class="price-display" id="travel-total">0</span> USD</div>
        <div class="price-item"><span>住宿费用小计：</span><span class="price-display" id="hotel-total">0</span> USD</div>
        <div class="price-item"><span>导游服务：</span><span class="price-display" id="guide-total">0</span> USD</div>
        <div class="price-item"><span>附加服务小计：</span><span class="price-display" id="extra-total">0</span> USD</div>
              <div class="total-price">总计: <span id="total-price">0</span> USD</div>
      </div>
    </div>

   
    <div class="section">
      <h2 class="section-title">乘客信息</h2>
      <div class="info-card">
        <div class="btn-box"><button class="btn" id="add-passenger-btn"><i class="fas fa-plus"></i> 添加乘客</button></div>
        <div class="passenger-list" id="passenger-list"></div>
      </div>
    </div>

    <div class="section">
      <h2 class="section-title">导出格式</h2>
      <div class="output-area" id="output-content"></div>
      <div class="btn-box"><button class="btn" id="update-output-btn"><i class="fas fa-sync-alt"></i> 更新输出</button><button class="btn" id="copy-btn"><i class="fas fa-copy"></i> 复制文本</button><button class="btn" id="download-btn"><i class="fas fa-download"></i> 下载文件</button><button class="btn" id="save-supabase-btn"><i class="fas fa-save"></i> 保存到Supabase</button></div>
    </div>
  </div>

  <footer>
    <p>格鲁吉亚专业地接服务| © 2025</p></footer>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="bjd.js"></script>
<!-- ② 主题切换逻辑（直接放这里即可） -->
<script>
  const toggle = document.getElementById('themeToggle');
  const html = document.documentElement;
  // 读取本地记忆
  const saved = localStorage.getItem('theme');
  if (saved === 'light') { toggle.checked = true; html.classList.add('light'); }
  // 监听切换
  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      html.classList.add('light');
      localStorage.setItem('theme', 'light');
    } else {
      html.classList.remove('light');
      localStorage.setItem('theme', 'dark');
    }
  });
</script>
</body>
</html>

